(*
 *	M T C  -  Modula-2 to C Translator
 *      ----------------------------------
 *
 *	Purpose	: stores and prints error messages
 *
 *	$Author: grosch $
 *	$Date: 2003/01/03 18:02:41 $
 *	$Revision: 1.1 $
 *
 ***)

DEFINITION MODULE Errors;

FROM SYSTEM	IMPORT ADDRESS;
FROM Idents	IMPORT tIdent;
FROM IO		IMPORT tFile;
FROM Position	IMPORT tPosition;

CONST
  NoText		= 0	;
  SyntaxError		= 1	;	(* error codes		*)
  ExpectedTokens	= 2	;
  RestartPoint		= 3	;
  TokenInserted		= 4	;
  TooManyErrors		= 8	;
  TokenFound		= 9	;
  FoundExpected		= 10	;
  IllegalChar		= 11	;
  UnclosedComment	= 12	;
  UnclosedString	= 13	;
  CyclicDefMods 	= 14	;
  ModNotFound		= 15	;
  NoNEWPROCESS		= 16	;
  NoTRANSFER		= 17	;
  NoIOTRANSFER		= 18	;
  StructTypeReq		= 19	;
  OpaqueConflict	= 20	;
  ForeignConflict	= 21	;
  Underscores		= 22	;
  OutOfLongRange	= 23	;
  AddrOfCall		= 24	;
  Undeclared		= 25	;
  Assignment		= 26	;
  
  TclTkError		= 31	;
  ConfigureUnknownParam	= 32	;

  NoClass		= 0	;
  Fatal			= 1	;	(* error classes	*)
  Restriction		= 2	;
  Error			= 3	;
  Warning		= 4	;
  Repair		= 5	;
  Note			= 6	;
  Information		= 7	;

  None			= 0	;
  Integer		= 1	;	(* info classes		*)
  String		= 7	;
  Array			= 8	;
  Ident			= 10	;

(* ErrorMessageP, ErrorMessagePI, ErrorMessage and ErrorMessageI do not	*)
(* return after a report of a fatal error. Instead PrintMessages (TRUE)	*)
(* is called and afterwards the program terminates with exit status 1.	*)

PROCEDURE ErrorMessageP	(ErrorCode, ErrorClass: CARDINAL; Pos: tPosition);
			(* record an error message			*)

PROCEDURE ErrorMessagePI(ErrorCode, ErrorClass: CARDINAL; Pos: tPosition;
			 InfoClass: CARDINAL; Info: ADDRESS);
			(* record an error message with additional	*)
			(* information of type 'InfoClass' at address	*)
			(* 'Info'					*)

(* ErrorMessage and ErrorMessageI are only used by the parser (see	*)
(* interface description of parser generated by ell). Each error	*)
(* message relates to the source file currently parsed.			*)

PROCEDURE ErrorMessage	(ErrorCode, ErrorClass: CARDINAL; Pos: tPosition);
			(* record an error message			*)

PROCEDURE ErrorMessageI	(ErrorCode, ErrorClass: CARDINAL; Pos: tPosition;
			 InfoClass: CARDINAL; Info: ADDRESS);
			(* record an error message with additional	*)
			(* information of type 'InfoClass' at address	*)
			(* 'Info'					*)

PROCEDURE CompilerError	(Proc: ARRAY OF CHAR);
			(* report a compiler error in procedure	'Proc'	*)
			(* and terminate program with exit status 1	*)

PROCEDURE NumberOfErrors(): CARDINAL;
			(* returns total number of errors in error	*)
			(* classes Fatal, Restriction, and Error	*)

PROCEDURE PrintMessages	(NoWarnings: BOOLEAN);
			(* print sorted error messages to StdError	*)

END Errors.
